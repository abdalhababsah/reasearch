import{c as ue,r as ne,b as ge,j as t}from"./app-XseEcuwc.js";import{B as de}from"./button-DI4PaxQ7.js";import{I as he}from"./input-MwdOiVtB.js";import{L as se}from"./label-DepknyqC.js";import{T as xe}from"./textarea-UpJGMb4k.js";import{u as je}from"./index-CR-rnG23.js";import{X as be}from"./x-DgzPl7e4.js";import{L as ve}from"./loader-circle-v5nqKdhA.js";import{U as fe}from"./upload-P9KV_7qs.js";/* empty css            */import"./index-DRE42a0L.js";function Pe(n){const e=ue.c(109),{onSuccess:d}=n,{t:s}=je();let W;e[0]===Symbol.for("react.memo_cache_sentinel")?(W=[],e[0]=W):W=e[0];const[m,X]=ne.useState(W);let $;e[1]===Symbol.for("react.memo_cache_sentinel")?($=[],e[1]=$):$=e[1];const[r,z]=ne.useState($);let H;e[2]===Symbol.for("react.memo_cache_sentinel")?(H=[],e[2]=H):H=e[2];let K;e[3]===Symbol.for("react.memo_cache_sentinel")?(K={image_files:H,title:"",description:""},e[3]=K):K=e[3];const{data:f,setData:a,post:le,processing:l,errors:o,reset:p}=ge(K);let Q;e[4]!==a?(Q=i=>{const c=Array.from(i.target.files||[]);X(c),a("image_files",c);const ce=c.map(Ne);z(ce)},e[4]=a,e[5]=Q):Q=e[5];const ie=Q;let V;e[6]!==r||e[7]!==m||e[8]!==a?(V=i=>{const c=m.filter((pe,me)=>me!==i),ce=r.filter((pe,me)=>me!==i);X(c),z(ce),a("image_files",c),URL.revokeObjectURL(r[i])},e[6]=r,e[7]=m,e[8]=a,e[9]=V):V=e[9];const re=V;let Y;e[10]!==d||e[11]!==le||e[12]!==r||e[13]!==p?(Y=i=>{i.preventDefault(),le("/researcher/images",{forceFormData:!0,onSuccess:()=>{p(),X([]),r.forEach(Fe),z([]),d()}})},e[10]=d,e[11]=le,e[12]=r,e[13]=p,e[14]=Y):Y=e[14];const ae=Y;let u;e[15]!==s?(u=s("images.uploadForm.images")||"Images",e[15]=s,e[16]=u):u=e[16];let g;e[17]!==u?(g=t.jsxs(se,{htmlFor:"image_files",children:[u," *"]}),e[17]=u,e[18]=g):g=e[18];let Z;e[19]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(fe,{className:"h-8 w-8 text-muted-foreground mb-2"}),e[19]=Z):Z=e[19];let h;e[20]!==s?(h=s("images.uploadForm.clickToUpload")||"Click to upload or drag and drop",e[20]=s,e[21]=h):h=e[21];let x;e[22]!==h?(x=t.jsx("p",{className:"text-sm text-muted-foreground",children:h}),e[22]=h,e[23]=x):x=e[23];let ee;e[24]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"JPG, PNG, GIF, or WEBP (max 10MB each)"}),e[24]=ee):ee=e[24];let j;e[25]!==x?(j=t.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[Z,x,ee]}),e[25]=x,e[26]=j):j=e[26];let b;e[27]!==ie||e[28]!==l?(b=t.jsx("input",{id:"image_files",type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/gif,image/webp",onChange:ie,disabled:l}),e[27]=ie,e[28]=l,e[29]=b):b=e[29];let v;e[30]!==j||e[31]!==b?(v=t.jsx("div",{className:"mt-2",children:t.jsxs("label",{htmlFor:"image_files",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",children:[j,b]})}),e[30]=j,e[31]=b,e[32]=v):v=e[32];let _;e[33]!==o.image_files?(_=o.image_files&&t.jsx("p",{className:"mt-1 text-sm text-destructive",children:o.image_files}),e[33]=o.image_files,e[34]=_):_=e[34];let F;e[35]!==v||e[36]!==_||e[37]!==g?(F=t.jsxs("div",{children:[g,v,_]}),e[35]=v,e[36]=_,e[37]=g,e[38]=F):F=e[38];let N;e[39]!==r||e[40]!==l||e[41]!==re||e[42]!==m||e[43]!==s?(N=m.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(se,{children:s("images.uploadForm.selectedImages")||"Selected Images"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:m.map((i,c)=>t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"aspect-square rounded-lg border bg-muted overflow-hidden",children:t.jsx("img",{src:r[c],alt:i.name,className:"w-full h-full object-cover"})}),t.jsx("button",{type:"button",onClick:()=>re(c),className:"absolute -top-2 -right-2 w-6 h-6 bg-destructive text-destructive-foreground rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",disabled:l,children:t.jsx(be,{className:"h-4 w-4"})}),t.jsx("p",{className:"mt-1 text-xs text-muted-foreground truncate",children:i.name})]},c))})]}),e[39]=r,e[40]=l,e[41]=re,e[42]=m,e[43]=s,e[44]=N):N=e[44];let y;e[45]!==s?(y=s("images.uploadForm.title")||"Title (Optional)",e[45]=s,e[46]=y):y=e[46];let U;e[47]!==y?(U=t.jsx(se,{htmlFor:"title",children:y}),e[47]=y,e[48]=U):U=e[48];let w;e[49]!==a?(w=i=>a("title",i.target.value),e[49]=a,e[50]=w):w=e[50];let S;e[51]!==s?(S=s("images.uploadForm.titlePlaceholder")||"Enter a title for all images",e[51]=s,e[52]=S):S=e[52];let L;e[53]!==f.title||e[54]!==l||e[55]!==w||e[56]!==S?(L=t.jsx(he,{id:"title",value:f.title,onChange:w,placeholder:S,disabled:l}),e[53]=f.title,e[54]=l,e[55]=w,e[56]=S,e[57]=L):L=e[57];let R;e[58]!==o.title?(R=o.title&&t.jsx("p",{className:"mt-1 text-sm text-destructive",children:o.title}),e[58]=o.title,e[59]=R):R=e[59];let C;e[60]!==U||e[61]!==L||e[62]!==R?(C=t.jsxs("div",{children:[U,L,R]}),e[60]=U,e[61]=L,e[62]=R,e[63]=C):C=e[63];let k;e[64]!==s?(k=s("images.uploadForm.description")||"Description (Optional)",e[64]=s,e[65]=k):k=e[65];let E;e[66]!==k?(E=t.jsx(se,{htmlFor:"description",children:k}),e[66]=k,e[67]=E):E=e[67];let I;e[68]!==a?(I=i=>a("description",i.target.value),e[68]=a,e[69]=I):I=e[69];let O;e[70]!==s?(O=s("images.uploadForm.descriptionPlaceholder")||"Add a description for all images",e[70]=s,e[71]=O):O=e[71];let P;e[72]!==f.description||e[73]!==l||e[74]!==I||e[75]!==O?(P=t.jsx(xe,{id:"description",value:f.description,onChange:I,placeholder:O,rows:3,disabled:l}),e[72]=f.description,e[73]=l,e[74]=I,e[75]=O,e[76]=P):P=e[76];let T;e[77]!==o.description?(T=o.description&&t.jsx("p",{className:"mt-1 text-sm text-destructive",children:o.description}),e[77]=o.description,e[78]=T):T=e[78];let B;e[79]!==E||e[80]!==P||e[81]!==T?(B=t.jsxs("div",{children:[E,P,T]}),e[79]=E,e[80]=P,e[81]=T,e[82]=B):B=e[82];let D;e[83]!==d||e[84]!==r||e[85]!==p?(D=()=>{p(),X([]),r.forEach(_e),z([]),d()},e[83]=d,e[84]=r,e[85]=p,e[86]=D):D=e[86];let G;e[87]!==s?(G=s("actions.cancel")||"Cancel",e[87]=s,e[88]=G):G=e[88];let A;e[89]!==l||e[90]!==D||e[91]!==G?(A=t.jsx(de,{type:"button",variant:"outline",onClick:D,disabled:l,children:G}),e[89]=l,e[90]=D,e[91]=G,e[92]=A):A=e[92];const oe=l||m.length===0;let q;e[93]!==l||e[94]!==s?(q=l?t.jsxs(t.Fragment,{children:[t.jsx(ve,{className:"h-4 w-4 mr-2 animate-spin"}),s("images.uploadForm.uploading")||"Uploading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(fe,{className:"h-4 w-4 mr-2"}),s("images.uploadForm.upload")||"Upload"]}),e[93]=l,e[94]=s,e[95]=q):q=e[95];let J;e[96]!==oe||e[97]!==q?(J=t.jsx(de,{type:"submit",disabled:oe,children:q}),e[96]=oe,e[97]=q,e[98]=J):J=e[98];let M;e[99]!==A||e[100]!==J?(M=t.jsxs("div",{className:"flex justify-end gap-2",children:[A,J]}),e[99]=A,e[100]=J,e[101]=M):M=e[101];let te;return e[102]!==ae||e[103]!==F||e[104]!==N||e[105]!==C||e[106]!==B||e[107]!==M?(te=t.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[F,N,C,B,M]}),e[102]=ae,e[103]=F,e[104]=N,e[105]=C,e[106]=B,e[107]=M,e[108]=te):te=e[108],te}function _e(n){return URL.revokeObjectURL(n)}function Fe(n){return URL.revokeObjectURL(n)}function Ne(n){return URL.createObjectURL(n)}export{Pe as default};
