import{c as Zl,b as ei,r as qt,j as t,H as si,a as ti}from"./app-XseEcuwc.js";import{A as li}from"./app-layout-CZoO53OF.js";import{u as ii}from"./index-CR-rnG23.js";import{B as yt}from"./button-DI4PaxQ7.js";import{I as p}from"./input-MwdOiVtB.js";import{T as El}from"./textarea-UpJGMb4k.js";import{C as wt}from"./checkbox-JVt2AbBM.js";import{I as f}from"./input-error-Dx3_jmKc.js";import{B as Vl}from"./badge-BtTJmYx1.js";/* empty css            */import"./x-DgzPl7e4.js";import"./index-BHKBQx4H.js";import"./index-C3Hm02L2.js";import"./index-DRE42a0L.js";import"./index-BDsVhmEQ.js";import"./index-DPjtb1Rz.js";import"./select-Bhj_cBoa.js";import"./index-BitGjllA.js";import"./app-logo-icon-3mANveO6.js";import"./index-BZB35nAZ.js";import"./index-CMWG4mbA.js";import"./app-logo-BdIHiqic.js";import"./chevron-right-BMEIDfYh.js";function Ai(d){const e=Zl.c(511),{statuses:b,categories:j,tags:Qt,research:c,selectedCategories:Pl,selectedTags:$l}=d,{t:s,locale:m}=ii(),Xt=Array.isArray(c.files)?c.files:[],Yt=c.raw.title_en||"",Zt=c.raw.title_ar||"",el=c.raw.abstract_en||"",sl=c.raw.abstract_ar||"",tl=c.raw.keywords_en||"",ll=c.raw.keywords_ar||"",il=c.raw.doi||"",al=c.raw.journal_name||"",rl=c.raw.status||"draft",cl=Pl,nl=$l;let Nt;e[0]===Symbol.for("react.memo_cache_sentinel")?(Nt=[],e[0]=Nt):Nt=e[0];let kt;e[1]===Symbol.for("react.memo_cache_sentinel")?(kt=[],e[1]=kt):kt=e[1];let Ct;e[2]===Symbol.for("react.memo_cache_sentinel")?(Ct=[],e[2]=Ct):Ct=e[2];const ol=Object.fromEntries((Xt||[]).map(ni));let Ft;e[3]!==c.raw.is_public||e[4]!==Yt||e[5]!==cl||e[6]!==nl||e[7]!==ol||e[8]!==Zt||e[9]!==el||e[10]!==sl||e[11]!==tl||e[12]!==ll||e[13]!==il||e[14]!==al||e[15]!==rl?(Ft={_method:"PUT",title_en:Yt,title_ar:Zt,abstract_en:el,abstract_ar:sl,keywords_en:tl,keywords_ar:ll,doi:il,journal_name:al,status:rl,is_public:c.raw.is_public,category_ids:cl,tag_ids:nl,files:Nt,file_visibility:kt,primary_file_index:null,remove_file_ids:Ct,existing_file_visibility:ol,wallpaper:null,remove_wallpaper:!1},e[3]=c.raw.is_public,e[4]=Yt,e[5]=cl,e[6]=nl,e[7]=ol,e[8]=Zt,e[9]=el,e[10]=sl,e[11]=tl,e[12]=ll,e[13]=il,e[14]=al,e[15]=rl,e[16]=Ft):Ft=e[16];const{data:l,setData:a,post:dl,processing:v,errors:n}=ei(Ft),[h,Tl]=qt.useState(""),[u,Hl]=qt.useState(""),[_,ml]=qt.useState(c.wallpaper_url);Xt.find(ci)?.id;let Vt,St;e[17]!==l.remove_wallpaper||e[18]!==l.wallpaper||e[19]!==c.wallpaper_url?(Vt=()=>{if(l.remove_wallpaper){ml(null);return}if(!l.wallpaper){ml(c.wallpaper_url);return}const i=URL.createObjectURL(l.wallpaper);return ml(i),()=>URL.revokeObjectURL(i)},St=[l.wallpaper,l.remove_wallpaper,c.wallpaper_url],e[17]=l.remove_wallpaper,e[18]=l.wallpaper,e[19]=c.wallpaper_url,e[20]=Vt,e[21]=St):(Vt=e[20],St=e[21]),qt.useEffect(Vt,St);let Bt;e[22]!==dl||e[23]!==c.id?(Bt=i=>{i.preventDefault(),dl(`/researcher/researches/${c.id}`,{forceFormData:!0})},e[22]=dl,e[23]=c.id,e[24]=Bt):Bt=e[24];const fl=Bt;let Et;e[25]!==l.file_visibility||e[26]!==l.files||e[27]!==l.primary_file_index||e[28]!==a?(Et=i=>{const r=Array.from(i.target.files??[]);if(!r.length)return;const o=[...l.files??[],...r],x=[...l.file_visibility??[],...r.map(ri)];a("files",o),a("file_visibility",x),l.primary_file_index===null&&o.length>0&&a("primary_file_index",0),i.target.value=""},e[25]=l.file_visibility,e[26]=l.files,e[27]=l.primary_file_index,e[28]=a,e[29]=Et):Et=e[29];const xl=Et;let At;e[30]!==a?(At=i=>{const r=i.target.files?.[0]??null;a("wallpaper",r),r&&a("remove_wallpaper",!1)},e[30]=a,e[31]=At):At=e[31];const pl=At;let Pt;e[32]!==l.category_ids||e[33]!==a?(Pt=(i,r)=>{const o=l.category_ids??[],x=r?[...o,i]:o.filter(g=>g!==i);a("category_ids",x)},e[32]=l.category_ids,e[33]=a,e[34]=Pt):Pt=e[34];const hl=Pt;let $t;e[35]!==l.tag_ids||e[36]!==a?($t=(i,r)=>{const o=l.tag_ids??[],x=r?[...o,i]:o.filter(g=>g!==i);a("tag_ids",x)},e[35]=l.tag_ids,e[36]=a,e[37]=$t):$t=e[37];const ul=$t;let Tt;e[38]!==l.file_visibility||e[39]!==l.files||e[40]!==l.primary_file_index||e[41]!==a?(Tt=i=>{const r=(l.files??[]).filter((x,g)=>g!==i),o=(l.file_visibility??[]).filter((x,g)=>g!==i);a("files",r),a("file_visibility",o),l.primary_file_index===i?a("primary_file_index",r.length?0:null):l.primary_file_index!==null&&l.primary_file_index>i&&a("primary_file_index",l.primary_file_index-1)},e[38]=l.file_visibility,e[39]=l.files,e[40]=l.primary_file_index,e[41]=a,e[42]=Tt):Tt=e[42];const Ll=Tt;let Ht;e[43]!==l.existing_file_visibility||e[44]!==l.remove_file_ids||e[45]!==a?(Ht=i=>{const r=[...l.remove_file_ids??[],i];a("remove_file_ids",r);const o={...l.existing_file_visibility||{}};delete o[i],a("existing_file_visibility",o)},e[43]=l.existing_file_visibility,e[44]=l.remove_file_ids,e[45]=a,e[46]=Ht):Ht=e[46];const Rl=Ht;let Lt;e[47]!==l.existing_file_visibility||e[48]!==a?(Lt=(i,r)=>{const o={...l.existing_file_visibility||{}};o[i]=r,a("existing_file_visibility",o)},e[47]=l.existing_file_visibility,e[48]=a,e[49]=Lt):Lt=e[49];const Ml=Lt;let Rt;e[50]!==a?(Rt=()=>{a("wallpaper",null),a("remove_wallpaper",!0)},e[50]=a,e[51]=Rt):Rt=e[51];const _l=Rt;let Mt;e[52]!==l.remove_file_ids?(Mt=i=>i&&!l.remove_file_ids.includes(i.id),e[52]=l.remove_file_ids,e[53]=Mt):Mt=e[53];const Sl=(Xt||[]).filter(Mt);let Ut;if(e[54]!==j||e[55]!==h||e[56]!==m){let i;e[58]!==h||e[59]!==m?(i=r=>(m==="ar"?r.name_ar??r.name_en??"":r.name_en??r.name_ar??"").toLowerCase().includes(h.toLowerCase()),e[58]=h,e[59]=m,e[60]=i):i=e[60],Ut=j.filter(i),e[54]=j,e[55]=h,e[56]=m,e[57]=Ut}else Ut=e[57];const Wt=Ut;let zt;if(e[61]!==m||e[62]!==u||e[63]!==Qt){let i;e[65]!==m||e[66]!==u?(i=r=>(m==="ar"?r.name_ar??r.name_en??"":r.name_en??r.name_ar??"").toLowerCase().includes(u.toLowerCase()),e[65]=m,e[66]=u,e[67]=i):i=e[67],zt=Qt.filter(i),e[61]=m,e[62]=u,e[63]=Qt,e[64]=zt}else zt=e[64];const It=zt,Bl=Array.isArray(l.files)?l.files.filter(Boolean):[],gl=li;let y;e[68]!==s?(y=s("researches.title"),e[68]=s,e[69]=y):y=e[69];let w;e[70]!==y?(w={title:y,href:"/researcher/researches"},e[70]=y,e[71]=w):w=e[71];let N;e[72]!==c.title||e[73]!==s?(N=c.title??s("researches.card.untitled"),e[72]=c.title,e[73]=s,e[74]=N):N=e[74];const bl=`/researcher/researches/${c.id}`;let k;e[75]!==N||e[76]!==bl?(k={title:N,href:bl},e[75]=N,e[76]=bl,e[77]=k):k=e[77];let C;e[78]!==s?(C=s("actions.edit"),e[78]=s,e[79]=C):C=e[79];let F;e[80]!==C?(F={title:C,href:"#"},e[80]=C,e[81]=F):F=e[81];let V;e[82]!==w||e[83]!==k||e[84]!==F?(V=[w,k,F],e[82]=w,e[83]=k,e[84]=F,e[85]=V):V=e[85];let Ot;e[86]!==s?(Ot=s("actions.edit"),e[86]=s,e[87]=Ot):Ot=e[87];let Dt;e[88]!==c.title||e[89]!==s?(Dt=c.title??s("researches.card.untitled"),e[88]=c.title,e[89]=s,e[90]=Dt):Dt=e[90];const jl=`${Ot} • ${Dt}`;let S;e[91]!==jl?(S=t.jsx(si,{title:jl}),e[91]=jl,e[92]=S):S=e[92];const Ul="flex flex-1 flex-col gap-6 p-4 lg:p-6";let B;e[93]!==s?(B=s("actions.edit"),e[93]=s,e[94]=B):B=e[94];let E;e[95]!==c.title||e[96]!==B?(E=t.jsxs("h1",{className:"text-xl font-semibold",children:[B," ",c.title]}),e[95]=c.title,e[96]=B,e[97]=E):E=e[97];let A;e[98]!==s?(A=s("researches.form.editSubtitle",{defaultValue:"Update your research details, manage files, and adjust settings."}),e[98]=s,e[99]=A):A=e[99];let P;e[100]!==A?(P=t.jsx("p",{className:"text-sm text-muted-foreground",children:A}),e[100]=A,e[101]=P):P=e[101];let $;e[102]!==E||e[103]!==P?($=t.jsxs("div",{children:[E,P]}),e[102]=E,e[103]=P,e[104]=$):$=e[104];let T;e[105]!==c.id?(T=()=>ti.visit(`/researcher/researches/${c.id}`),e[105]=c.id,e[106]=T):T=e[106];let H;e[107]!==s?(H=s("actions.cancel"),e[107]=s,e[108]=H):H=e[108];let L;e[109]!==T||e[110]!==H?(L=t.jsx(yt,{type:"button",variant:"outline",onClick:T,children:H}),e[109]=T,e[110]=H,e[111]=L):L=e[111];let R;e[112]!==v||e[113]!==s?(R=s(v?"actions.saving":"actions.update"),e[112]=v,e[113]=s,e[114]=R):R=e[114];let M;e[115]!==v||e[116]!==R?(M=t.jsx(yt,{type:"submit",disabled:v,className:"min-w-[120px]",children:R}),e[115]=v,e[116]=R,e[117]=M):M=e[117];let U;e[118]!==L||e[119]!==M?(U=t.jsxs("div",{className:"flex gap-2",children:[L,M]}),e[118]=L,e[119]=M,e[120]=U):U=e[120];let W;e[121]!==$||e[122]!==U?(W=t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[$,U]}),e[121]=$,e[122]=U,e[123]=W):W=e[123];const Wl="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(280px,1fr)]",zl="space-y-6";let z;e[124]!==s?(z=s("researches.form.basicInfo"),e[124]=s,e[125]=z):z=e[125];let I;e[126]!==z?(I=t.jsx("h2",{className:"text-base font-semibold",children:z}),e[126]=z,e[127]=I):I=e[127];let O;e[128]!==l.status?(O=t.jsx(Vl,{variant:"outline",className:"text-xs",children:l.status}),e[128]=l.status,e[129]=O):O=e[129];let D;e[130]!==I||e[131]!==O?(D=t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[I,O]}),e[130]=I,e[131]=O,e[132]=D):D=e[132];let J;e[133]!==s?(J=s("researches.form.title_en"),e[133]=s,e[134]=J):J=e[134];let G;e[135]!==J?(G=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:J}),e[135]=J,e[136]=G):G=e[136];const Il=l.title_en;let K;e[137]!==a?(K=i=>a("title_en",i.target.value),e[137]=a,e[138]=K):K=e[138];let q;e[139]!==s?(q=s("researches.form.titlePlaceholderEn"),e[139]=s,e[140]=q):q=e[140];let Q;e[141]!==l.title_en||e[142]!==K||e[143]!==q?(Q=t.jsx(p,{value:Il,onChange:K,placeholder:q}),e[141]=l.title_en,e[142]=K,e[143]=q,e[144]=Q):Q=e[144];let X;e[145]!==n.title_en?(X=t.jsx(f,{message:n.title_en}),e[145]=n.title_en,e[146]=X):X=e[146];let Y;e[147]!==G||e[148]!==Q||e[149]!==X?(Y=t.jsxs("div",{children:[G,Q,X]}),e[147]=G,e[148]=Q,e[149]=X,e[150]=Y):Y=e[150];let Z;e[151]!==s?(Z=s("researches.form.title_ar"),e[151]=s,e[152]=Z):Z=e[152];let ee;e[153]!==Z?(ee=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:Z}),e[153]=Z,e[154]=ee):ee=e[154];const Ol=l.title_ar;let se;e[155]!==a?(se=i=>a("title_ar",i.target.value),e[155]=a,e[156]=se):se=e[156];let te;e[157]!==s?(te=s("researches.form.titlePlaceholderAr"),e[157]=s,e[158]=te):te=e[158];let le;e[159]!==l.title_ar||e[160]!==se||e[161]!==te?(le=t.jsx(p,{value:Ol,onChange:se,placeholder:te}),e[159]=l.title_ar,e[160]=se,e[161]=te,e[162]=le):le=e[162];let ie;e[163]!==n.title_ar?(ie=t.jsx(f,{message:n.title_ar}),e[163]=n.title_ar,e[164]=ie):ie=e[164];let ae;e[165]!==ee||e[166]!==le||e[167]!==ie?(ae=t.jsxs("div",{children:[ee,le,ie]}),e[165]=ee,e[166]=le,e[167]=ie,e[168]=ae):ae=e[168];let re;e[169]!==Y||e[170]!==ae?(re=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[Y,ae]}),e[169]=Y,e[170]=ae,e[171]=re):re=e[171];let ce;e[172]!==s?(ce=s("researches.form.abstract_en"),e[172]=s,e[173]=ce):ce=e[173];let ne;e[174]!==ce?(ne=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:ce}),e[174]=ce,e[175]=ne):ne=e[175];const Dl=l.abstract_en;let oe;e[176]!==a?(oe=i=>a("abstract_en",i.target.value),e[176]=a,e[177]=oe):oe=e[177];let de;e[178]!==s?(de=s("researches.form.abstractPlaceholderEn"),e[178]=s,e[179]=de):de=e[179];let me;e[180]!==l.abstract_en||e[181]!==oe||e[182]!==de?(me=t.jsx(El,{rows:5,value:Dl,onChange:oe,placeholder:de}),e[180]=l.abstract_en,e[181]=oe,e[182]=de,e[183]=me):me=e[183];let fe;e[184]!==n.abstract_en?(fe=t.jsx(f,{message:n.abstract_en}),e[184]=n.abstract_en,e[185]=fe):fe=e[185];let xe;e[186]!==ne||e[187]!==me||e[188]!==fe?(xe=t.jsxs("div",{children:[ne,me,fe]}),e[186]=ne,e[187]=me,e[188]=fe,e[189]=xe):xe=e[189];let pe;e[190]!==s?(pe=s("researches.form.abstract_ar"),e[190]=s,e[191]=pe):pe=e[191];let he;e[192]!==pe?(he=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:pe}),e[192]=pe,e[193]=he):he=e[193];const Jl=l.abstract_ar;let ue;e[194]!==a?(ue=i=>a("abstract_ar",i.target.value),e[194]=a,e[195]=ue):ue=e[195];let _e;e[196]!==s?(_e=s("researches.form.abstractPlaceholderAr"),e[196]=s,e[197]=_e):_e=e[197];let ge;e[198]!==l.abstract_ar||e[199]!==ue||e[200]!==_e?(ge=t.jsx(El,{rows:5,value:Jl,onChange:ue,placeholder:_e}),e[198]=l.abstract_ar,e[199]=ue,e[200]=_e,e[201]=ge):ge=e[201];let be;e[202]!==n.abstract_ar?(be=t.jsx(f,{message:n.abstract_ar}),e[202]=n.abstract_ar,e[203]=be):be=e[203];let je;e[204]!==he||e[205]!==ge||e[206]!==be?(je=t.jsxs("div",{children:[he,ge,be]}),e[204]=he,e[205]=ge,e[206]=be,e[207]=je):je=e[207];let ve;e[208]!==xe||e[209]!==je?(ve=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[xe,je]}),e[208]=xe,e[209]=je,e[210]=ve):ve=e[210];let ye;e[211]!==s?(ye=s("researches.form.keywords_en"),e[211]=s,e[212]=ye):ye=e[212];let we;e[213]!==ye?(we=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:ye}),e[213]=ye,e[214]=we):we=e[214];const Gl=l.keywords_en;let Ne;e[215]!==a?(Ne=i=>a("keywords_en",i.target.value),e[215]=a,e[216]=Ne):Ne=e[216];let ke;e[217]!==s?(ke=s("researches.form.keywordsPlaceholderEn"),e[217]=s,e[218]=ke):ke=e[218];let Ce;e[219]!==l.keywords_en||e[220]!==ke||e[221]!==Ne?(Ce=t.jsx(p,{value:Gl,onChange:Ne,placeholder:ke}),e[219]=l.keywords_en,e[220]=ke,e[221]=Ne,e[222]=Ce):Ce=e[222];let Fe;e[223]!==s?(Fe=s("researches.form.keywordsHelp"),e[223]=s,e[224]=Fe):Fe=e[224];let Ve;e[225]!==Fe?(Ve=t.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:Fe}),e[225]=Fe,e[226]=Ve):Ve=e[226];let Se;e[227]!==n.keywords_en?(Se=t.jsx(f,{message:n.keywords_en}),e[227]=n.keywords_en,e[228]=Se):Se=e[228];let Be;e[229]!==Ce||e[230]!==Ve||e[231]!==Se||e[232]!==we?(Be=t.jsxs("div",{children:[we,Ce,Ve,Se]}),e[229]=Ce,e[230]=Ve,e[231]=Se,e[232]=we,e[233]=Be):Be=e[233];let Ee;e[234]!==s?(Ee=s("researches.form.keywords_ar"),e[234]=s,e[235]=Ee):Ee=e[235];let Ae;e[236]!==Ee?(Ae=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:Ee}),e[236]=Ee,e[237]=Ae):Ae=e[237];const Kl=l.keywords_ar;let Pe;e[238]!==a?(Pe=i=>a("keywords_ar",i.target.value),e[238]=a,e[239]=Pe):Pe=e[239];let $e;e[240]!==s?($e=s("researches.form.keywordsPlaceholderAr"),e[240]=s,e[241]=$e):$e=e[241];let Te;e[242]!==l.keywords_ar||e[243]!==Pe||e[244]!==$e?(Te=t.jsx(p,{value:Kl,onChange:Pe,placeholder:$e}),e[242]=l.keywords_ar,e[243]=Pe,e[244]=$e,e[245]=Te):Te=e[245];let He;e[246]!==s?(He=s("researches.form.keywordsHelp"),e[246]=s,e[247]=He):He=e[247];let Le;e[248]!==He?(Le=t.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:He}),e[248]=He,e[249]=Le):Le=e[249];let Re;e[250]!==n.keywords_ar?(Re=t.jsx(f,{message:n.keywords_ar}),e[250]=n.keywords_ar,e[251]=Re):Re=e[251];let Me;e[252]!==Ae||e[253]!==Te||e[254]!==Le||e[255]!==Re?(Me=t.jsxs("div",{children:[Ae,Te,Le,Re]}),e[252]=Ae,e[253]=Te,e[254]=Le,e[255]=Re,e[256]=Me):Me=e[256];let Ue;e[257]!==Be||e[258]!==Me?(Ue=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[Be,Me]}),e[257]=Be,e[258]=Me,e[259]=Ue):Ue=e[259];let We;e[260]!==s?(We=s("researches.form.doi",{defaultValue:"DOI"}),e[260]=s,e[261]=We):We=e[261];let ze;e[262]!==We?(ze=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:We}),e[262]=We,e[263]=ze):ze=e[263];const ql=l.doi;let Ie;e[264]!==a?(Ie=i=>a("doi",i.target.value),e[264]=a,e[265]=Ie):Ie=e[265];let Oe;e[266]!==s?(Oe=s("researches.form.doiPlaceholder",{defaultValue:"e.g. 10.1234/abcd.efgh"}),e[266]=s,e[267]=Oe):Oe=e[267];let De;e[268]!==l.doi||e[269]!==Ie||e[270]!==Oe?(De=t.jsx(p,{value:ql,onChange:Ie,placeholder:Oe}),e[268]=l.doi,e[269]=Ie,e[270]=Oe,e[271]=De):De=e[271];let Je;e[272]!==n.doi?(Je=t.jsx(f,{message:n.doi}),e[272]=n.doi,e[273]=Je):Je=e[273];let Ge;e[274]!==ze||e[275]!==De||e[276]!==Je?(Ge=t.jsxs("div",{children:[ze,De,Je]}),e[274]=ze,e[275]=De,e[276]=Je,e[277]=Ge):Ge=e[277];let Ke;e[278]!==s?(Ke=s("researches.form.journal_name",{defaultValue:"Journal Name"}),e[278]=s,e[279]=Ke):Ke=e[279];let qe;e[280]!==Ke?(qe=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:Ke}),e[280]=Ke,e[281]=qe):qe=e[281];const Ql=l.journal_name;let Qe;e[282]!==a?(Qe=i=>a("journal_name",i.target.value),e[282]=a,e[283]=Qe):Qe=e[283];let Xe;e[284]!==s?(Xe=s("researches.form.journalNamePlaceholder",{defaultValue:"Journal of Emerging Research"}),e[284]=s,e[285]=Xe):Xe=e[285];let Ye;e[286]!==l.journal_name||e[287]!==Qe||e[288]!==Xe?(Ye=t.jsx(p,{value:Ql,onChange:Qe,placeholder:Xe}),e[286]=l.journal_name,e[287]=Qe,e[288]=Xe,e[289]=Ye):Ye=e[289];let Ze;e[290]!==n.journal_name?(Ze=t.jsx(f,{message:n.journal_name}),e[290]=n.journal_name,e[291]=Ze):Ze=e[291];let es;e[292]!==qe||e[293]!==Ye||e[294]!==Ze?(es=t.jsxs("div",{children:[qe,Ye,Ze]}),e[292]=qe,e[293]=Ye,e[294]=Ze,e[295]=es):es=e[295];let ss;e[296]!==Ge||e[297]!==es?(ss=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[Ge,es]}),e[296]=Ge,e[297]=es,e[298]=ss):ss=e[298];let ts;e[299]!==Ue||e[300]!==ss||e[301]!==D||e[302]!==re||e[303]!==ve?(ts=t.jsxs("section",{className:"rounded-xl border bg-card p-5 shadow-sm space-y-4",children:[D,re,ve,Ue,ss]}),e[299]=Ue,e[300]=ss,e[301]=D,e[302]=re,e[303]=ve,e[304]=ts):ts=e[304];let ls;e[305]!==s?(ls=s("researches.form.taxonomy"),e[305]=s,e[306]=ls):ls=e[306];let is;e[307]!==ls?(is=t.jsx("h2",{className:"text-base font-semibold",children:ls}),e[307]=ls,e[308]=is):is=e[308];let as;e[309]!==s?(as=s("researches.form.taxonomyHelp"),e[309]=s,e[310]=as):as=e[310];let rs;e[311]!==as?(rs=t.jsx("p",{className:"text-xs text-muted-foreground",children:as}),e[311]=as,e[312]=rs):rs=e[312];let cs;e[313]!==is||e[314]!==rs?(cs=t.jsxs("div",{className:"flex items-center justify-between",children:[is,rs]}),e[313]=is,e[314]=rs,e[315]=cs):cs=e[315];let ns;e[316]!==s?(ns=s("researches.form.categories"),e[316]=s,e[317]=ns):ns=e[317];let os;e[318]!==ns?(os=t.jsx("span",{className:"text-xs font-medium uppercase tracking-wide",children:ns}),e[318]=ns,e[319]=os):os=e[319];let ds;e[320]!==s?(ds=s("actions.search"),e[320]=s,e[321]=ds):ds=e[321];let Jt;e[322]===Symbol.for("react.memo_cache_sentinel")?(Jt=i=>Tl(i.target.value),e[322]=Jt):Jt=e[322];let ms;e[323]!==h||e[324]!==ds?(ms=t.jsx(p,{placeholder:ds,value:h,onChange:Jt,className:"h-8 text-xs max-w-[180px]"}),e[323]=h,e[324]=ds,e[325]=ms):ms=e[325];let fs;e[326]!==os||e[327]!==ms?(fs=t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[os,ms]}),e[326]=os,e[327]=ms,e[328]=fs):fs=e[328];let xs;e[329]!==l.category_ids||e[330]!==Wt||e[331]!==m||e[332]!==s||e[333]!==hl?(xs=t.jsx("div",{className:"mt-1 max-h-48 overflow-y-auto rounded-md border p-2",children:Wt.length?t.jsx("div",{className:"flex flex-wrap gap-1.5",children:Wt.map(i=>{const r=m==="ar"?i.name_ar??i.name_en??"":i.name_en??i.name_ar??"",o=l.category_ids.includes(i.id);return t.jsxs("label",{className:`inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs transition cursor-pointer ${o?"border-primary bg-primary/10 text-primary":"border-border bg-background hover:bg-muted"}`,children:[t.jsx(wt,{checked:o,onCheckedChange:()=>hl(i.id,!o),className:"h-3 w-3"}),t.jsx("span",{className:"truncate max-w-[130px]",children:r})]},i.id)})}):t.jsx("p",{className:"text-[11px] text-muted-foreground",children:s("researches.form.noCategories")})}),e[329]=l.category_ids,e[330]=Wt,e[331]=m,e[332]=s,e[333]=hl,e[334]=xs):xs=e[334];const vl=n.category_ids;let ps;e[335]!==vl?(ps=t.jsx(f,{message:vl}),e[335]=vl,e[336]=ps):ps=e[336];let hs;e[337]!==fs||e[338]!==xs||e[339]!==ps?(hs=t.jsxs("div",{className:"space-y-2",children:[fs,xs,ps]}),e[337]=fs,e[338]=xs,e[339]=ps,e[340]=hs):hs=e[340];let us;e[341]!==s?(us=s("researches.form.tags"),e[341]=s,e[342]=us):us=e[342];let _s;e[343]!==us?(_s=t.jsx("span",{className:"text-xs font-medium uppercase tracking-wide",children:us}),e[343]=us,e[344]=_s):_s=e[344];let gs;e[345]!==s?(gs=s("actions.search"),e[345]=s,e[346]=gs):gs=e[346];let Gt;e[347]===Symbol.for("react.memo_cache_sentinel")?(Gt=i=>Hl(i.target.value),e[347]=Gt):Gt=e[347];let bs;e[348]!==gs||e[349]!==u?(bs=t.jsx(p,{placeholder:gs,value:u,onChange:Gt,className:"h-8 text-xs max-w-[180px]"}),e[348]=gs,e[349]=u,e[350]=bs):bs=e[350];let js;e[351]!==_s||e[352]!==bs?(js=t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[_s,bs]}),e[351]=_s,e[352]=bs,e[353]=js):js=e[353];let vs;e[354]!==l.tag_ids||e[355]!==It||e[356]!==m||e[357]!==s||e[358]!==ul?(vs=t.jsx("div",{className:"mt-1 max-h-48 overflow-y-auto rounded-md border p-2",children:It.length?t.jsx("div",{className:"flex flex-wrap gap-1.5",children:It.map(i=>{const r=m==="ar"?i.name_ar??i.name_en??"":i.name_en??i.name_ar??"",o=l.tag_ids.includes(i.id);return t.jsxs("label",{className:`inline-flex items-center gap-1 rounded-full border px-2.5 py-1 text-xs transition cursor-pointer ${o?"border-primary bg-primary/10 text-primary":"border-border bg-background hover:bg-muted"}`,children:[t.jsx(wt,{checked:o,onCheckedChange:()=>ul(i.id,!o),className:"h-3 w-3"}),t.jsx("span",{className:"truncate max-w-[130px]",children:r})]},i.id)})}):t.jsx("p",{className:"text-[11px] text-muted-foreground",children:s("researches.form.noTags")})}),e[354]=l.tag_ids,e[355]=It,e[356]=m,e[357]=s,e[358]=ul,e[359]=vs):vs=e[359];const yl=n.tag_ids;let ys;e[360]!==yl?(ys=t.jsx(f,{message:yl}),e[360]=yl,e[361]=ys):ys=e[361];let ws;e[362]!==js||e[363]!==vs||e[364]!==ys?(ws=t.jsxs("div",{className:"space-y-2",children:[js,vs,ys]}),e[362]=js,e[363]=vs,e[364]=ys,e[365]=ws):ws=e[365];let Ns;e[366]!==hs||e[367]!==ws?(Ns=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[hs,ws]}),e[366]=hs,e[367]=ws,e[368]=Ns):Ns=e[368];let ks;e[369]!==cs||e[370]!==Ns?(ks=t.jsxs("section",{className:"rounded-xl border bg-card p-5 shadow-sm space-y-4",children:[cs,Ns]}),e[369]=cs,e[370]=Ns,e[371]=ks):ks=e[371];const Xl="rounded-xl border bg-card p-5 shadow-sm space-y-4";let Cs;e[372]!==s?(Cs=s("researches.form.files"),e[372]=s,e[373]=Cs):Cs=e[373];let Fs;e[374]!==Cs?(Fs=t.jsx("h2",{className:"text-base font-semibold",children:Cs}),e[374]=Cs,e[375]=Fs):Fs=e[375];let Vs;e[376]!==s?(Vs=s("researches.show.filesHelp"),e[376]=s,e[377]=Vs):Vs=e[377];let Ss;e[378]!==Vs?(Ss=t.jsx("p",{className:"text-xs text-muted-foreground max-w-[260px] text-right",children:Vs}),e[378]=Vs,e[379]=Ss):Ss=e[379];let Bs;e[380]!==Fs||e[381]!==Ss?(Bs=t.jsxs("div",{className:"flex items-center justify-between",children:[Fs,Ss]}),e[380]=Fs,e[381]=Ss,e[382]=Bs):Bs=e[382];const wl=Sl.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("span",{className:"text-xs font-medium uppercase tracking-wide",children:s("researches.form.existingFiles",{defaultValue:"Existing Files"})}),t.jsx("ul",{className:"divide-y rounded-md border text-sm",children:Sl.map(i=>t.jsxs("li",{className:"flex items-center gap-3 px-3 py-2",children:[t.jsxs("div",{className:"flex flex-1 flex-col gap-0.5",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"truncate max-w-[220px]",children:i.name}),i.is_primary&&t.jsx(Vl,{variant:"secondary",className:"text-[10px]",children:s("researches.form.primaryFile")})]}),t.jsx("span",{className:"text-[11px] text-muted-foreground",children:(i.mime_type||"—")+" · "+Al(i.size_bytes)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(wt,{checked:l.existing_file_visibility?.[i.id]??i.is_visible??!0,onCheckedChange:r=>Ml(i.id,!!r)}),t.jsx("span",{className:"text-[11px] text-muted-foreground",children:s("researches.show.fileVisible")})]}),t.jsx(yt,{type:"button",size:"sm",variant:"ghost",className:"h-7 px-2 text-xs text-destructive",onClick:()=>Rl(i.id),children:s("actions.remove")})]},i.id))})]});let Es;e[383]!==s?(Es=s("researches.form.addMoreFiles",{defaultValue:"Add more documents"}),e[383]=s,e[384]=Es):Es=e[384];let As;e[385]!==Es?(As=t.jsx("p",{className:"text-sm font-medium",children:Es}),e[385]=Es,e[386]=As):As=e[386];let Ps;e[387]!==s?(Ps=s("researches.form.dropFilesSubtitle",{defaultValue:"Any file type: docs, code, archives, datasets, etc."}),e[387]=s,e[388]=Ps):Ps=e[388];let $s;e[389]!==Ps?($s=t.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:Ps}),e[389]=Ps,e[390]=$s):$s=e[390];let Ts;e[391]!==s?(Ts=s("researches.form.chooseFiles"),e[391]=s,e[392]=Ts):Ts=e[392];let Hs;e[393]!==Ts?(Hs=t.jsx("span",{children:Ts}),e[393]=Ts,e[394]=Hs):Hs=e[394];let Ls;e[395]!==xl?(Ls=t.jsx(p,{type:"file",multiple:!0,className:"hidden",onChange:xl}),e[395]=xl,e[396]=Ls):Ls=e[396];let Rs;e[397]!==Hs||e[398]!==Ls?(Rs=t.jsx("div",{className:"mt-3 flex justify-center",children:t.jsxs("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-md border bg-background px-3 py-1.5 text-xs font-medium shadow-sm hover:bg-accent hover:text-accent-foreground",children:[Hs,Ls]})}),e[397]=Hs,e[398]=Ls,e[399]=Rs):Rs=e[399];const Nl=n.files;let Ms;e[400]!==Nl?(Ms=t.jsx(f,{message:Nl}),e[400]=Nl,e[401]=Ms):Ms=e[401];let Us;e[402]!==As||e[403]!==$s||e[404]!==Rs||e[405]!==Ms?(Us=t.jsxs("div",{className:"rounded-lg border border-dashed bg-muted/40 p-4 text-center",children:[As,$s,Rs,Ms]}),e[402]=As,e[403]=$s,e[404]=Rs,e[405]=Ms,e[406]=Us):Us=e[406];const kl=Bl.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs font-medium uppercase tracking-wide",children:s("researches.form.newFiles",{defaultValue:"New Files"})}),t.jsx("span",{className:"text-[11px] text-muted-foreground",children:s("researches.form.primaryHint")})]}),t.jsx("ul",{className:"divide-y rounded-md border text-sm",children:Bl.map((i,r)=>t.jsxs("li",{className:"flex items-center gap-3 px-3 py-2",children:[t.jsx("input",{type:"radio",name:"primary_file_index",className:"h-3 w-3 mt-0.5",checked:l.primary_file_index===r,onChange:()=>a("primary_file_index",r)}),t.jsxs("div",{className:"flex flex-1 flex-col gap-0.5",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"truncate max-w-[220px]",children:i.name??s("researches.form.unnamedFile",{defaultValue:"Unnamed file"})}),l.primary_file_index===r&&t.jsx(Vl,{variant:"secondary",className:"text-[10px]",children:s("researches.form.primaryFile")})]}),t.jsx("span",{className:"text-[11px] text-muted-foreground",children:(i.type||"—")+" · "+Al(i.size)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(wt,{checked:l.file_visibility?.[r]??!0,onCheckedChange:o=>{const x=[...l.file_visibility??[]];x[r]=!!o,a("file_visibility",x)}}),t.jsx("span",{className:"text-[11px] text-muted-foreground",children:s("researches.show.fileVisible")})]}),t.jsx(yt,{type:"button",size:"sm",variant:"ghost",className:"h-7 px-2 text-xs text-destructive",onClick:()=>Ll(r),children:s("actions.remove")})]},`${i.name??"file"}-${r}`))})]});let Ws;e[407]!==s?(Ws=s("researches.form.wallpaper"),e[407]=s,e[408]=Ws):Ws=e[408];let zs;e[409]!==Ws?(zs=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:Ws}),e[409]=Ws,e[410]=zs):zs=e[410];let Is;e[411]!==s?(Is=s("researches.form.wallpaperHelp",{defaultValue:"Optional cover image for the research card."}),e[411]=s,e[412]=Is):Is=e[412];let Os;e[413]!==Is?(Os=t.jsx("p",{className:"text-[11px] text-muted-foreground mb-1",children:Is}),e[413]=Is,e[414]=Os):Os=e[414];let Ds;e[415]!==pl?(Ds=t.jsx(p,{type:"file",accept:"image/*",onChange:pl}),e[415]=pl,e[416]=Ds):Ds=e[416];let Js;e[417]!==l.remove_wallpaper||e[418]!==_l||e[419]!==s||e[420]!==_?(Js=_&&!l.remove_wallpaper&&t.jsx(yt,{type:"button",size:"sm",variant:"destructive",className:"mt-2",onClick:_l,children:s("researches.form.removeWallpaper",{defaultValue:"Remove Wallpaper"})}),e[417]=l.remove_wallpaper,e[418]=_l,e[419]=s,e[420]=_,e[421]=Js):Js=e[421];const Cl=n.wallpaper;let Gs;e[422]!==Cl?(Gs=t.jsx(f,{message:Cl}),e[422]=Cl,e[423]=Gs):Gs=e[423];let Ks;e[424]!==zs||e[425]!==Os||e[426]!==Ds||e[427]!==Js||e[428]!==Gs?(Ks=t.jsxs("div",{className:"space-y-2",children:[zs,Os,Ds,Js,Gs]}),e[424]=zs,e[425]=Os,e[426]=Ds,e[427]=Js,e[428]=Gs,e[429]=Ks):Ks=e[429];let qs;e[430]!==l.remove_wallpaper||e[431]!==s||e[432]!==_?(qs=t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"relative h-32 w-40 overflow-hidden rounded-lg border bg-muted",children:_&&!l.remove_wallpaper?t.jsx("img",{src:_,alt:"Wallpaper preview",className:"h-full w-full object-cover"}):t.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-muted-foreground",children:s("researches.form.noWallpaperPreview",{defaultValue:"No image"})})})}),e[430]=l.remove_wallpaper,e[431]=s,e[432]=_,e[433]=qs):qs=e[433];let Qs;e[434]!==Ks||e[435]!==qs?(Qs=t.jsxs("div",{className:"mt-4 border-t pt-4 grid gap-4 md:grid-cols-[minmax(0,1fr)_200px] items-start",children:[Ks,qs]}),e[434]=Ks,e[435]=qs,e[436]=Qs):Qs=e[436];let Xs;e[437]!==Bs||e[438]!==wl||e[439]!==Us||e[440]!==kl||e[441]!==Qs?(Xs=t.jsxs("section",{className:Xl,children:[Bs,wl,Us,kl,Qs]}),e[437]=Bs,e[438]=wl,e[439]=Us,e[440]=kl,e[441]=Qs,e[442]=Xs):Xs=e[442];let Ys;e[443]!==ts||e[444]!==ks||e[445]!==Xs?(Ys=t.jsxs("div",{className:zl,children:[ts,ks,Xs]}),e[443]=ts,e[444]=ks,e[445]=Xs,e[446]=Ys):Ys=e[446];let Zs;e[447]!==s?(Zs=s("researches.form.settings"),e[447]=s,e[448]=Zs):Zs=e[448];let et;e[449]!==Zs?(et=t.jsx("h2",{className:"text-base font-semibold",children:Zs}),e[449]=Zs,e[450]=et):et=e[450];let st;e[451]!==s?(st=s("researches.form.status"),e[451]=s,e[452]=st):st=e[452];let tt;e[453]!==st?(tt=t.jsx("label",{className:"block text-xs font-medium mb-1 uppercase tracking-wide",children:st}),e[453]=st,e[454]=tt):tt=e[454];const Yl=l.status;let lt;e[455]!==a?(lt=i=>a("status",i.target.value),e[455]=a,e[456]=lt):lt=e[456];let it;e[457]!==b?(it=b.map(ai),e[457]=b,e[458]=it):it=e[458];let at;e[459]!==l.status||e[460]!==lt||e[461]!==it?(at=t.jsx("select",{className:"w-full rounded-md border px-2 py-1.5 text-sm bg-background",value:Yl,onChange:lt,children:it}),e[459]=l.status,e[460]=lt,e[461]=it,e[462]=at):at=e[462];let rt;e[463]!==n.status?(rt=t.jsx(f,{message:n.status}),e[463]=n.status,e[464]=rt):rt=e[464];let ct;e[465]!==tt||e[466]!==at||e[467]!==rt?(ct=t.jsxs("div",{children:[tt,at,rt]}),e[465]=tt,e[466]=at,e[467]=rt,e[468]=ct):ct=e[468];let nt;e[469]!==a?(nt=i=>a("is_public",!!i),e[469]=a,e[470]=nt):nt=e[470];let ot;e[471]!==l.is_public||e[472]!==nt?(ot=t.jsx(wt,{checked:l.is_public,onCheckedChange:nt}),e[471]=l.is_public,e[472]=nt,e[473]=ot):ot=e[473];let dt;e[474]!==s?(dt=s("researches.visibility.public"),e[474]=s,e[475]=dt):dt=e[475];let mt;e[476]!==dt?(mt=t.jsx("span",{className:"text-sm font-medium",children:dt}),e[476]=dt,e[477]=mt):mt=e[477];let ft;e[478]!==s?(ft=s("researches.form.visibilityHelp"),e[478]=s,e[479]=ft):ft=e[479];let xt;e[480]!==ft?(xt=t.jsx("span",{className:"text-[11px] text-muted-foreground",children:ft}),e[480]=ft,e[481]=xt):xt=e[481];let pt;e[482]!==mt||e[483]!==xt?(pt=t.jsxs("div",{className:"flex flex-col",children:[mt,xt]}),e[482]=mt,e[483]=xt,e[484]=pt):pt=e[484];let ht;e[485]!==ot||e[486]!==pt?(ht=t.jsxs("div",{className:"flex items-center gap-2",children:[ot,pt]}),e[485]=ot,e[486]=pt,e[487]=ht):ht=e[487];const Fl=n.is_public;let ut;e[488]!==Fl?(ut=t.jsx(f,{message:Fl}),e[488]=Fl,e[489]=ut):ut=e[489];let _t;e[490]!==ht||e[491]!==ut?(_t=t.jsxs("div",{className:"space-y-2",children:[ht,ut]}),e[490]=ht,e[491]=ut,e[492]=_t):_t=e[492];let gt;e[493]!==ct||e[494]!==_t?(gt=t.jsxs("div",{className:"space-y-4 text-sm",children:[ct,_t]}),e[493]=ct,e[494]=_t,e[495]=gt):gt=e[495];let bt;e[496]!==et||e[497]!==gt?(bt=t.jsx("aside",{className:"space-y-4",children:t.jsxs("section",{className:"rounded-xl border bg-card p-5 shadow-sm space-y-4",children:[et,gt]})}),e[496]=et,e[497]=gt,e[498]=bt):bt=e[498];let jt;e[499]!==Ys||e[500]!==bt?(jt=t.jsxs("div",{className:Wl,children:[Ys,bt]}),e[499]=Ys,e[500]=bt,e[501]=jt):jt=e[501];let vt;e[502]!==fl||e[503]!==jt||e[504]!==W?(vt=t.jsxs("form",{onSubmit:fl,className:Ul,children:[W,jt]}),e[502]=fl,e[503]=jt,e[504]=W,e[505]=vt):vt=e[505];let Kt;return e[506]!==gl||e[507]!==vt||e[508]!==V||e[509]!==S?(Kt=t.jsxs(gl,{breadcrumbs:V,children:[S,vt]}),e[506]=gl,e[507]=vt,e[508]=V,e[509]=S,e[510]=Kt):Kt=e[510],Kt}function ai(d){return t.jsx("option",{value:d.value,children:d.label},d.value)}function ri(){return!0}function ci(d){return d.is_primary}function ni(d){return[d.id,!!d.is_visible]}function Al(d){if(!d||!Number.isFinite(d)||d<=0)return"0 B";const e=["B","KB","MB","GB"],b=Math.min(Math.floor(Math.log(d)/Math.log(1024)),e.length-1),j=d/Math.pow(1024,b);return`${j.toFixed(j>=10?0:1)} ${e[b]}`}export{Ai as default};
